<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quotes</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4WMD1NQT45"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-4WMD1NQT45');
  </script>

  <style>
    /* Algemene stijlen en achtergrond */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(-45deg, #1a2a6c, #b21f1f, #fdbb2d, #00c9ff);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: white;
      overflow: hidden;
      position: relative;
    }

    /* Vervagende mist-overlay */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 255, 255, 0.05);
      pointer-events: none;
      z-index: 0;
      backdrop-filter: blur(4px);
      opacity: 0;
      animation: fadeInMist 5s forwards;
    }

    /* Achtergrond animaties */
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @keyframes fadeInMist {
      to { opacity: 1; }
    }

    /* Loading scherm - volledig scherm zwart met animatie */
    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    /* SVG animatie stijlen */
    svg {
      width: 500px;
      height: 500px;
      stroke: white;
      fill: none;
    }
    .point { fill: white; opacity: 0; animation: appear 0.5s forwards; }
    .line { stroke-width: 2; stroke: white; stroke-dasharray: 1200; stroke-dashoffset: 1200; animation: draw 1.3s forwards; }
    .line.thickened { animation: draw 2s forwards, thicken-line 0.8s forwards; animation-delay: 0.5s, 2s; }
    .circle { stroke-width: 2; stroke: white; fill: none; stroke-dasharray: 2500; stroke-dashoffset: 2500; animation: draw-circle 2s forwards, thicken-circle 0.8s forwards; animation-delay: 3s, 5s; }
    .text { fill: white; font-family: monospace; font-size: 40px; opacity: 0; animation: slide-in 1s forwards; animation-delay: 8s; }

    /* SVG animaties keyframes */
    @keyframes appear { to { opacity: 1; } }
    @keyframes draw { to { stroke-dashoffset: 0; } }
    @keyframes draw-circle { to { stroke-dashoffset: 0; } }
    @keyframes thicken-line { to { stroke-width: 8; } }
    @keyframes thicken-circle { to { stroke-width: 8; } }
    @keyframes slide-in { 0% { opacity: 0; transform: translateX(60px); } 100% { opacity: 1; transform: translateX(0); } }

    /* Main content is verborgen bij laden */
    #main-content {
      display: none;
      height: 100vh;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
    }

    /* Container voor quotes */
    .quote-container {
      position: relative;
      width: 80%;
      max-width: 700px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      z-index: 10;
      overflow-y: auto;
      height: 80vh;
      top: 10%;
      min-height: 200px; /* voorkomt schommelingen */
    }

    /* Quotes absolute positioneren voor animaties */
    .quote-container div.quote {
      position: absolute;
      width: 100%;
      max-width: 500px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.15);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
      font-size: 1.5em;
      line-height: 1.6;
      text-align: center;
      color: #eef4f8;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
      z-index: 10;
      opacity: 1;
    }

    /* Animaties voor quotes sliding */
    @keyframes slideInLeft {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(-50%); opacity: 1; }
    }
    @keyframes slideOutRight {
      from { transform: translateX(-50%); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Oude quote die weg schuift naar rechts */
    .quote-container div.last {
      animation: slideOutRight 1s ease forwards;
    }

    /* Nieuwe quote die van links binnen schuift */
    .quote-container div.new {
      animation: slideInLeft 2s ease forwards;
      opacity: 1;
      position: absolute;
      width: 100%;
      max-width: 500px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 20;
    }

    /* Indicator rechtsboven */
    .quote-indicator {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-size: 1.2em;
      font-weight: bold;
      opacity: 0.5;
      z-index: 30;
    }
  </style>
</head>
<body>

  <!-- Loading scherm -->
  <div id="loading-screen">
    <svg id="canvas" viewBox="0 0 500 500" aria-hidden="true">
      <text id="text" class="text" x="0" y="0">uotes</text>
    </svg>
  </div>

  <!-- Hoofdinhoud, verborgen tot laden klaar -->
  <div id="main-content">
    <div class="quote-container" id="quotes"></div>
    <div id="quoteIndicator" class="quote-indicator">1/1</div>
  </div>

  <script>
    // Verberg loading scherm na 9 seconden, toon main content
    setTimeout(() => {
      document.getElementById('loading-screen').style.display = 'none';
      document.getElementById('main-content').style.display = 'flex';
    }, 9000);

    // Fetch quotes uit quotes.txt en start weergave
    async function fetchQuotes() {
      const response = await fetch('quotes.txt');
      const text = await response.text();

      // Quotes parsen uit text bestand
      const lines = text.trim().split('\n');
      let quotes = lines.map(line => {
        const match = line.match(/\[(\d{2}-\d{2}-\d{4}) (\d{2}:\d{2})\] (.*?): (.*)/);
        if (!match) return null;
        return {
          date: match[1],
          time: match[2],
          person: match[3],
          quote: match[4]
        };
      }).filter(q => q);

      quotes.reverse();  // Laatste quote eerst tonen

      const container = document.getElementById('quotes');
      const quoteIndicator = document.getElementById('quoteIndicator');
      let index = 0;

      // Toon volgende quote met animatie
      function showNextQuote() {
        if (quotes.length === 0) return;

        const oldQuote = container.querySelector('.quote');

        if (oldQuote) {
          // Oude quote animatie naar rechts, dan verwijderen
          oldQuote.classList.add('last');
          addNewQuote();
          setTimeout(() => {
            oldQuote.remove();
          }, 1000); // duur animatie slideOutRight
        } else {
          // Eerste quote zonder verwijderen
          addNewQuote();
        }
      }

      // Voeg nieuwe quote toe en start slide-in animatie
      function addNewQuote() {
        const quoteObj = quotes[index];
        const quoteText = quoteObj.quote;

        // Maak nieuw quote-element
        const quoteElement = document.createElement('div');
        quoteElement.classList.add('quote', 'new');
        quoteElement.innerHTML = `
          ${quoteText}<br><br>
          - ${quoteObj.person} -<br><br>
          ${quoteObj.date} ${quoteObj.time}
        `;

        container.appendChild(quoteElement);

        // Verwijder 'new' class na animatie zodat styling normaal blijft
        setTimeout(() => {
          quoteElement.classList.remove('new');
        }, 1000);

        // Update indicator
        quoteIndicator.textContent = `${index + 1}/${quotes.length}`;

        // Bepaal hoe lang quote zichtbaar blijft, op basis van lengte
        const durationSec = (Math.ceil(quoteText.length / 25) * 2) + 1;
        index = (index + 1) % quotes.length;

        setTimeout(showNextQuote, durationSec * 1000);
      }

      showNextQuote();
    }

    fetchQuotes();
  </script>

</body>
</html>
